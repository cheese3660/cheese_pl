[
  [
    "simple tests: entry",
    "entry_test.chs",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void"
      }
    }
  ],
  [
    "simple tests: recursive factorial",
    "call_test.chs",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "i64",
        "body": [
          {
            "type": "return",
            "value": {
              "type": "call",
              "function": "fact_ai64",
              "arguments": [
                {
                  "type": "integer",
                  "value": 3,
                  "ty": "i64"
                }
              ]
            }
          }
        ]
      },
      "fact_ai64": {
        "type": "function",
        "name": "fact_ai64",
        "arguments": [
          {
            "name": "x",
            "type": "i64"
          }
        ],
        "return_type": "i64",
        "body": [
          {
            "type": "return",
            "value": {
              "type": "if",
              "condition": {
                "type": "==",
                "lhs": {
                  "type": "value",
                  "name": "x"
                },
                "rhs": {
                  "type": "integer",
                  "value": 0,
                  "ty": "i64"
                }
              },
              "body": {
                "type": "integer",
                "value": 1,
                "ty": "i64"
              },
              "else": {
                "type": "*",
                "lhs": {
                  "type": "value",
                  "name": "x"
                },
                "rhs": {
                  "type": "call",
                  "function": "fact_ai64",
                  "arguments": [
                    {
                      "type": "-",
                      "lhs": {
                        "type": "value",
                        "name": "x"
                      },
                      "rhs": {
                        "type": "integer",
                        "value": 1,
                        "ty": "i64"
                      }
                    }
                  ]
                }
              }
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: addition",
    "fn main => void entry\n{let x: i64=1+1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 2,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: subtraction",
    "fn main => void entry\n{let x: i64=1-1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 0,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: division",
    "fn main => void entry\n{let x: i64=1/1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 1,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: multiplication",
    "fn main => void entry\n{let x: i64=1*1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 1,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: xor",
    "fn main => void entry\n{let x: i64=1 xor 1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 0,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: or",
    "fn main => void entry\n{let x: i64=1 or 1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 1,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: and",
    "fn main => void entry\n{let x: i64=1 and 1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 1,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: not",
    "fn main => void entry\n{let x: i64=not 1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": -2,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: unary minus",
    "fn main => void entry\n{let x: i64=- 1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": -1,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: unary plus",
    "fn main => void entry\n{let x: i64=+ 1}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 1,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "constant folding: complex equation",
    "fn main => void entry\n{let x: i64 = ((5*3)+(10/2)) and 4}",
    {
      "main": {
        "type": "function",
        "name": "main",
        "arguments": [],
        "return_type": "void",
        "body": [
          {
            "type": "init",
            "name": "x",
            "ty": "i64",
            "value": {
              "type": "integer",
              "value": 4,
              "ty": "i64"
            }
          }
        ]
      }
    }
  ],
  [
    "expressions: Taking reference of something (immutable)",
    "fn main => void entry\n{let x: i64 = 0\nlet y = &x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "i64",
            "type": "init",
            "value": {
              "ty": "i64",
              "type": "integer"
            }
          },
          {
            "name": "y",
            "ty": "*i64",
            "type": "init",
            "value": {
              "child": {
                "name": "x",
                "type": "value"
              },
              "type": "&"
            }
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Taking reference of something (mutable)",
    "fn main => void entry\n{let x: i64 mut = 0\nlet y = &x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "i64",
            "type": "init",
            "value": {
              "ty": "i64",
              "type": "integer"
            }
          },
          {
            "name": "y",
            "ty": "*i64",
            "type": "init",
            "value": {
              "child": {
                "name": "x",
                "type": "value"
              },
              "type": "&"
            }
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Subscription (tuple, value)",
    "fn main => void entry\n{let x: struct(i64,i64,i64) = .(1,2,3)\nlet y = x.0}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "{i64,i64,i64}",
            "type": "init",
            "value": {
              "ty": "{i64,i64,i64}",
              "type": "object",
              "values": [
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 1
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 2
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 3
                }
              ]
            }
          },
          {
            "name": "y",
            "ty": "i64",
            "type": "init",
            "value": {
              "child": {
                "name": "x",
                "type": "value"
              },
              "type": "."
            }
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Subscription (tuple, reference)",
    "fn main => void entry\n{let x: struct(i64,i64,i64) = .(1,2,3)\nlet y = &x\nlet z = y.0}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "{i64,i64,i64}",
            "type": "init",
            "value": {
              "ty": "{i64,i64,i64}",
              "type": "object",
              "values": [
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 1
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 2
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 3
                }
              ]
            }
          },
          {
            "name": "y",
            "ty": "*{i64,i64,i64}",
            "type": "init",
            "value": {
              "child": {
                "name": "x",
                "type": "value"
              },
              "type": "&"
            }
          },
          {
            "name": "z",
            "ty": "i64",
            "type": "init",
            "value": {
              "child": {
                "name": "y",
                "type": "value"
              },
              "type": "->"
            }
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Subscription (structure, value)",
    "fn main => void entry\n{let x: struct{a:i64\nb:i64\nc:i64} = .{a:1,b:2,c:3}\nlet y = x.a}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "{i64,i64,i64}",
            "type": "init",
            "value": {
              "ty": "{i64,i64,i64}",
              "type": "object",
              "values": [
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 1
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 2
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 3
                }
              ]
            }
          },
          {
            "name": "y",
            "ty": "i64",
            "type": "init",
            "value": {
              "child": {
                "name": "x",
                "type": "value"
              },
              "type": "."
            }
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Subscription (structure, reference)",
    "fn main => void entry\n{let x: struct{a:i64\nb:i64\nc:i64} = .{a:1,b:2,c:3}\nlet y = &x\nlet z = y.a}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "{i64,i64,i64}",
            "type": "init",
            "value": {
              "ty": "{i64,i64,i64}",
              "type": "object",
              "values": [
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 1
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 2
                },
                {
                  "ty": "i64",
                  "type": "integer",
                  "value": 3
                }
              ]
            }
          },
          {
            "name": "y",
            "ty": "*{i64,i64,i64}",
            "type": "init",
            "value": {
              "child": {
                "name": "x",
                "type": "value"
              },
              "type": "&"
            }
          },
          {
            "name": "z",
            "ty": "i64",
            "type": "init",
            "value": {
              "child": {
                "name": "y",
                "type": "value"
              },
              "type": "->"
            }
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Unary plus (integers)",
    "fn main => void entry\n{let x: i64 = 1\n_ = +x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "i64",
            "type": "init",
            "value": {
              "ty": "i64",
              "type": "integer",
              "value": 1
            }
          },
          {
            "child": {
              "name": "x",
              "type": "value"
            },
            "type": "unary +"
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Unary plus (floats)",
    "fn main => void entry\n{let x: f64 = 1\n_ = +x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "f64",
            "type": "init",
            "value": {
              "ty": "f64",
              "type": "float",
              "value": 1.0
            }
          },
          {
            "child": {
              "name": "x",
              "type": "value"
            },
            "type": "unary +"
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Unary plus (complex numbers)",
    "fn main => void entry\n{let x: c64 = 1.0+2I\n_ = +x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "c64",
            "type": "init",
            "value": {
              "a": 1.0,
              "b": 2.0,
              "ty": "c64",
              "type": "complex"
            }
          },
          {
            "child": {
              "name": "x",
              "type": "value"
            },
            "type": "unary +"
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Unary plus (function pointers)",
    "import function_pointers @ l\nfn main => void entry\n{_ = +l.fn_pointer_integer}",
    {}
  ],
  [
    "expressions: Unary minus (integers)",
    "fn main => void entry\n{let x: i64 = 1\n_ = -x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "i64",
            "type": "init",
            "value": {
              "ty": "i64",
              "type": "integer",
              "value": 1
            }
          },
          {
            "child": {
              "name": "x",
              "type": "value"
            },
            "type": "unary -"
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Unary minus (floats)",
    "fn main => void entry\n{let x: f64 = 1\n_ = -x}",
    {
      "main": {
        "arguments": [],
        "body": [
          {
            "name": "x",
            "ty": "f64",
            "type": "init",
            "value": {
              ":template": "float_one"
            }
          },
          {
            "child": {
              "name": "x",
              "type": "value"
            },
            "type": "unary -"
          }
        ],
        "name": "main",
        "return_type": "void",
        "type": "function"
      }
    }
  ],
  [
    "expressions: Unary minus (complex numbers)",
    "fn main => void entry\n{let x: c64 = 1+2I\n_ = -x}",
    {}
  ],
  [
    "expressions: Unary minus (function pointers)",
    "import function_pointers @ l\nfn main => void entry\n{_ = -l.fn_pointer_integer}",
    {}
  ],
  [
    "expressions: Not (integers)",
    "fn main => void entry\n{let x: i64 = 1\n_ = not x}",
    {}
  ],
  [
    "expressions: Not (booleans)",
    "fn main => void entry\n{let x = false\n_ = not x}",
    {}
  ],
  [
    "expressions: Not (function pointers)",
    "import function_pointers @ l\nfn main => void entry\n{_ = not l.fn_pointer_integer}",
    {}
  ],
  {
    ":template": "binary_group",
    "NAME": "Multiplication",
    "OPERATION": "*",
    "INTEGER_COMPLEX": {},
    "FLOAT_COMPLEX": {},
    "COMPLEX_COMPLEX": {}
  },
  {
    ":template": "binary_group",
    "NAME": "Division",
    "OPERATION": "/",
    "INTEGER_COMPLEX": {},
    "FLOAT_COMPLEX": {},
    "COMPLEX_COMPLEX": {}
  },
  {
    ":template": "binary_group",
    "NAME": "Remainder",
    "OPERATION": "%",
    "INTEGER_COMPLEX": {},
    "FLOAT_COMPLEX": {},
    "COMPLEX_COMPLEX": {}
  },
  {
    ":template": "binary_group",
    "NAME": "Addition",
    "OPERATION": "+",
    "INTEGER_COMPLEX": {},
    "FLOAT_COMPLEX": {},
    "COMPLEX_COMPLEX": {}
  },
  {
    ":template": "binary_group",
    "NAME": "Subtraction",
    "OPERATION": "-",
    "INTEGER_COMPLEX": {},
    "FLOAT_COMPLEX": {},
    "COMPLEX_COMPLEX": {}
  }
]